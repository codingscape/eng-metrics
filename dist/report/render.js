export function renderMarkdown(client, org, metrics) {
    const lines = [];
    lines.push(`# Weekly engineering metrics (${client})`);
    lines.push('');
    lines.push(`Org: **${org}**`);
    lines.push(`Window: **${metrics.window.start} â†’ ${metrics.window.end}** (last ${metrics.window.days} days)`);
    lines.push('');
    lines.push('## Totals');
    lines.push('');
    lines.push(`- PRs opened: **${metrics.totals.prsOpened}**`);
    lines.push(`- PRs merged: **${metrics.totals.prsMerged}**`);
    lines.push(`- PRs closed (unmerged): **${metrics.totals.prsClosedUnmerged}**`);
    lines.push('');
    lines.push('## By engineer');
    lines.push('');
    const authors = Object.entries(metrics.byAuthor).sort((a, b) => b[1].prsMerged - a[1].prsMerged);
    for (const [author, m] of authors) {
        lines.push(`### ${author}`);
        lines.push('');
        lines.push(`- PRs opened: **${m.prsOpened}**`);
        lines.push(`- PRs merged: **${m.prsMerged}**`);
        lines.push(`- PRs closed (unmerged): **${m.prsClosedUnmerged}**`);
        if (m.medianCycleTimeHours != null)
            lines.push(`- Median cycle time (hrs): **${m.medianCycleTimeHours.toFixed(1)}**`);
        if (m.medianTimeToFirstReviewHours != null)
            lines.push(`- Median time to first review (hrs): **${m.medianTimeToFirstReviewHours.toFixed(1)}**`);
        lines.push('');
    }
    lines.push('---');
    lines.push('Generated by eng-metrics.');
    return lines.join('\n');
}
